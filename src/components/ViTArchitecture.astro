---
// ViT 架构流程图
---
<div class="svg-container bg-white border border-gray-200 shadow-inner">
    <svg width="800" height="400" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
        <!-- Arrow Def -->
        <defs>
            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
            </marker>
        </defs>

        <!-- Step 1: Input Image -->
        <g transform="translate(20, 100)">
            <rect x="0" y="0" width="80" height="80" fill="#e2e8f0" stroke="#333" stroke-width="2"/>
            <text x="40" y="45" text-anchor="middle" font-size="14" fill="#475569">图像</text>
            <text x="40" y="100" text-anchor="middle" font-size="12">输入图像</text>
        </g>

        <!-- Arrow -->
        <path d="M 110 140 L 140 140" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

        <!-- Step 2: Patches -->
        <g transform="translate(150, 80)">
            <rect x="0" y="0" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="25" y="0" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="50" y="0" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="0" y="25" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="25" y="25" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="50" y="25" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="0" y="50" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="25" y="50" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="50" y="50" width="20" height="20" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <text x="35" y="90" text-anchor="middle" font-size="12">Patch 切分</text>
        </g>

        <!-- Arrow -->
        <path d="M 230 140 L 260 140" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

        <!-- Step 3: Projection & Embeddings -->
        <g transform="translate(270, 50)">
            <rect x="0" y="0" width="15" height="80" fill="#fca5a5" stroke="#dc2626" stroke-width="1"/>
            <text x="7" y="-10" text-anchor="middle" font-size="10" fill="#dc2626">[CLS]</text>
            <rect x="20" y="0" width="15" height="80" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="40" y="0" width="15" height="80" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <rect x="60" y="0" width="15" height="80" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <text x="85" y="45" font-size="14">...</text>
            <rect x="100" y="0" width="15" height="80" fill="#bfdbfe" stroke="#2563eb" stroke-width="1"/>
            <g transform="translate(0, 85)">
                <circle cx="7" cy="10" r="6" fill="#fbbf24"/>
                <circle cx="27" cy="10" r="6" fill="#fbbf24"/>
                <circle cx="47" cy="10" r="6" fill="#fbbf24"/>
                <circle cx="67" cy="10" r="6" fill="#fbbf24"/>
                <circle cx="107" cy="10" r="6" fill="#fbbf24"/>
                <text x="50" y="30" text-anchor="middle" font-size="10">位置编码 (+ Pos)</text>
            </g>
        </g>

        <!-- Arrow -->
        <path d="M 400 100 L 440 100" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

        <!-- Step 4: Transformer Encoder -->
        <g transform="translate(450, 20)">
            <rect x="0" y="0" width="120" height="180" rx="10" fill="#e2e8f0" stroke="#475569" stroke-width="2"/>
            <text x="60" y="30" text-anchor="middle" font-weight="bold" font-size="14">Transformer</text>
            <text x="60" y="50" text-anchor="middle" font-weight="bold" font-size="14">Encoder</text>
            <rect x="20" y="70" width="80" height="30" fill="#fff" stroke="#94a3b8"/>
            <text x="60" y="90" text-anchor="middle" font-size="10">Multi-Head Attn</text>
            <rect x="20" y="110" width="80" height="30" fill="#fff" stroke="#94a3b8"/>
            <text x="60" y="130" text-anchor="middle" font-size="10">MLP / FeedFwd</text>
            <text x="60" y="160" text-anchor="middle" font-size="12" fill="#666">x L 层</text>
        </g>

        <!-- Arrow -->
        <path d="M 570 100 L 610 100" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>

        <!-- Step 5: Output -->
        <g transform="translate(620, 50)">
            <rect x="0" y="20" width="20" height="60" fill="#fca5a5" stroke="#dc2626" stroke-width="2"/>
            <text x="10" y="100" text-anchor="middle" font-size="10">分类头/特征</text>
            <path d="M 30 50 L 60 50" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)"/>
            <text x="70" y="55" font-weight="bold" fill="#059669">"是一只猫"</text>
        </g>
    </svg>
</div>
