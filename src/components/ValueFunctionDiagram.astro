---
// 价值函数可视化
---

<div class="svg-container">
  <svg width="900" height="500" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
    <defs>
      <linearGradient id="valueGrad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#0f766e;stop-opacity:0.4" />
        <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:0.4" />
      </linearGradient>
      <filter id="shadow">
        <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
        <feOffset dx="0" dy="2" result="offsetblur"/>
        <feComponentTransfer>
          <feFuncA type="linear" slope="0.3"/>
        </feComponentTransfer>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>

    <!-- 标题 -->
    <text x="450" y="30" text-anchor="middle" font-size="24" font-weight="bold" fill="#1e293b">价值函数对比</text>
    <text x="450" y="55" text-anchor="middle" font-size="14" fill="#64748b">状态价值函数 V(s) vs 动作价值函数 Q(s,a)</text>

    <!-- V(s) 图表 -->
    <g transform="translate(50, 80)">
      <text x="200" y="-20" text-anchor="middle" font-size="20" font-weight="bold" fill="#0f766e">状态价值函数 V^π(s)</text>
      <text x="200" y="0" text-anchor="middle" font-size="14" fill="#64748b">从状态 s 开始的期望总奖励</text>

      <!-- 网格 -->
      <g transform="translate(0, 30)">
        <rect x="0" y="0" width="400" height="180" fill="white" stroke="#e2e8f0" stroke-width="1"/>
        <line x1="0" y1="90" x2="400" y2="90" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="5,5"/>
        <line x1="200" y1="0" x2="200" y2="180" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="5,5"/>

        <!-- 状态值可视化（条形图） -->
        <g transform="translate(20, 130)">
          <rect x="0" y="-30" width="40" height="30" fill="#0f766e" opacity="0.7"/>
          <text x="20" y="-35" text-anchor="middle" font-size="12" fill="#0f766e">s₁</text>
          <text x="20" y="15" text-anchor="middle" font-size="14" fill="#1e293b">0.8</text>
        </g>

        <g transform="translate(80, 130)">
          <rect x="0" y="-50" width="40" height="50" fill="#0f766e" opacity="0.7"/>
          <text x="20" y="-55" text-anchor="middle" font-size="12" fill="#0f766e">s₂</text>
          <text x="20" y="15" text-anchor="middle" font-size="14" fill="#1e293b">1.2</text>
        </g>

        <g transform="translate(140, 130)">
          <rect x="0" y="-20" width="40" height="20" fill="#0f766e" opacity="0.7"/>
          <text x="20" y="-25" text-anchor="middle" font-size="12" fill="#0f766e">s₃</text>
          <text x="20" y="15" text-anchor="middle" font-size="14" fill="#1e293b">0.5</text>
        </g>

        <g transform="translate(200, 130)">
          <rect x="0" y="-80" width="40" height="80" fill="#0f766e" opacity="0.7"/>
          <text x="20" y="-85" text-anchor="middle" font-size="12" fill="#0f766e">s₄</text>
          <text x="20" y="15" text-anchor="middle" font-size="14" fill="#1e293b">2.0</text>
        </g>

        <g transform="translate(260, 130)">
          <rect x="0" y="-40" width="40" height="40" fill="#0f766e" opacity="0.7"/>
          <text x="20" y="-45" text-anchor="middle" font-size="12" fill="#0f766e">s₅</text>
          <text x="20" y="15" text-anchor="middle" font-size="14" fill="#1e293b">1.0</text>
        </g>

        <g transform="translate(320, 130)">
          <rect x="0" y="-60" width="40" height="60" fill="#0f766e" opacity="0.7"/>
          <text x="20" y="-65" text-anchor="middle" font-size="12" fill="#0f766e">s₆</text>
          <text x="20" y="15" text-anchor="middle" font-size="14" fill="#1e293b">1.5</text>
        </g>

        <!-- 坐标轴 -->
        <line x1="0" y1="130" x2="380" y2="130" stroke="#64748b" stroke-width="2"/>
        <line x1="0" y1="130" x2="0" y2="0" stroke="#64748b" stroke-width="2"/>
        <text x="190" y="155" text-anchor="middle" font-size="12" fill="#64748b">状态 (State)</text>
        <text x="-15" y="70" text-anchor="middle" font-size="12" fill="#64748b" transform="rotate(-90, -15, 70)">价值 (Value)</text>
      </g>
    </g>

    <!-- Q(s,a) 图表 -->
    <g transform="translate(450, 80)">
      <text x="200" y="-20" text-anchor="middle" font-size="20" font-weight="bold" fill="#8b5cf6">动作价值函数 Q^π(s,a)</text>
      <text x="200" y="0" text-anchor="middle" font-size="14" fill="#64748b">在状态 s 执行动作 a 的期望总奖励</text>

      <!-- 热力图 -->
      <g transform="translate(0, 30)">
        <rect x="0" y="0" width="400" height="180" fill="white" stroke="#e2e8f0" stroke-width="1"/>

        <!-- Q值热力图 -->
        <g>
          <!-- 第一行 (s₁) -->
          <rect x="0" y="0" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="25" y="20" text-anchor="middle" font-size="12" fill="white">-0.5</text>

          <rect x="50" y="0" width="50" height="30" fill="#f97316" opacity="0.8"/>
          <text x="75" y="20" text-anchor="middle" font-size="12" fill="white">0.3</text>

          <rect x="100" y="0" width="50" height="30" fill="#22c55e" opacity="0.8"/>
          <text x="125" y="20" text-anchor="middle" font-size="12" fill="white">0.9</text>

          <rect x="150" y="0" width="50" height="30" fill="#0f766e" opacity="0.8"/>
          <text x="175" y="20" text-anchor="middle" font-size="12" fill="white">1.5</text>

          <rect x="200" y="0" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="225" y="20" text-anchor="middle" font-size="12" fill="white">-0.2</text>

          <rect x="250" y="0" width="50" height="30" fill="#f97316" opacity="0.8"/>
          <text x="275" y="20" text-anchor="middle" font-size="12" fill="white">0.4</text>

          <rect x="300" y="0" width="50" height="30" fill="#8b5cf6" opacity="0.8"/>
          <text x="325" y="20" text-anchor="middle" font-size="12" fill="white">1.2</text>

          <rect x="350" y="0" width="50" height="30" fill="#0f766e" opacity="0.8"/>
          <text x="375" y="20" text-anchor="middle" font-size="12" fill="white">1.8</text>

          <!-- 第二行 (s₂) -->
          <rect x="0" y="30" width="50" height="30" fill="#0f766e" opacity="0.8"/>
          <text x="25" y="50" text-anchor="middle" font-size="12" fill="white">1.6</text>

          <rect x="50" y="30" width="50" height="30" fill="#22c55e" opacity="0.8"/>
          <text x="75" y="50" text-anchor="middle" font-size="12" fill="white">1.0</text>

          <rect x="100" y="30" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="125" y="50" text-anchor="middle" font-size="12" fill="white">-0.8</text>

          <rect x="150" y="30" width="50" height="30" fill="#f97316" opacity="0.8"/>
          <text x="175" y="50" text-anchor="middle" font-size="12" fill="white">0.2</text>

          <rect x="200" y="30" width="50" height="30" fill="#0f766e" opacity="0.8"/>
          <text x="225" y="50" text-anchor="middle" font-size="12" fill="white">1.7</text>

          <rect x="250" y="30" width="50" height="30" fill="#8b5cf6" opacity="0.8"/>
          <text x="275" y="50" text-anchor="middle" font-size="12" fill="white">1.3</text>

          <rect x="300" y="30" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="325" y="50" text-anchor="middle" font-size="12" fill="white">-0.3</text>

          <rect x="350" y="30" width="50" height="30" fill="#22c55e" opacity="0.8"/>
          <text x="375" y="50" text-anchor="middle" font-size="12" fill="white">0.8</text>

          <!-- 第三行 (s₃) -->
          <rect x="0" y="60" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="25" y="80" text-anchor="middle" font-size="12" fill="white">-1.0</text>

          <rect x="50" y="60" width="50" height="30" fill="#f97316" opacity="0.8"/>
          <text x="75" y="80" text-anchor="middle" font-size="12" fill="white">0.1</text>

          <rect x="100" y="60" width="50" height="30" fill="#0f766e" opacity="0.8"/>
          <text x="125" y="80" text-anchor="middle" font-size="12" fill="white">1.4</text>

          <rect x="150" y="60" width="50" height="30" fill="#22c55e" opacity="0.8"/>
          <text x="175" y="80" text-anchor="middle" font-size="12" fill="white">0.7</text>

          <rect x="200" y="60" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="225" y="80" text-anchor="middle" font-size="12" fill="white">-0.6</text>

          <rect x="250" y="60" width="50" height="30" fill="#8b5cf6" opacity="0.8"/>
          <text x="275" y="80" text-anchor="middle" font-size="12" fill="white">1.1</text>

          <rect x="300" y="60" width="50" height="30" fill="#22c55e" opacity="0.8"/>
          <text x="325" y="80" text-anchor="middle" font-size="12" fill="white">0.9</text>

          <rect x="350" y="60" width="50" height="30" fill="#dc2626" opacity="0.8"/>
          <text x="375" y="80" text-anchor="middle" font-size="12" fill="white">-0.4</text>
        </g>

        <!-- 坐标轴标签 -->
        <text x="200" y="210" text-anchor="middle" font-size="12" fill="#64748b">动作 (Action)</text>
        <text x="-15" y="100" text-anchor="middle" font-size="12" fill="#64748b" transform="rotate(-90, -15, 100)">状态 (State)</text>

        <!-- 动作标签 -->
        <text x="25" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₁</text>
        <text x="75" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₂</text>
        <text x="125" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₃</text>
        <text x="175" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₄</text>
        <text x="225" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₅</text>
        <text x="275" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₆</text>
        <text x="325" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₇</text>
        <text x="375" y="195" text-anchor="middle" font-size="11" fill="#64748b">a₈</text>

        <!-- 状态标签 -->
        <text x="-10" y="15" text-anchor="end" font-size="11" fill="#64748b">s₁</text>
        <text x="-10" y="45" text-anchor="end" font-size="11" fill="#64748b">s₂</text>
        <text x="-10" y="75" text-anchor="end" font-size="11" fill="#64748b">s₃</text>
      </g>
    </g>

    <!-- 颜色图例 -->
    <g transform="translate(350, 480)">
      <text x="0" y="0" font-size="12" fill="#64748b">价值：</text>
      <rect x="50" y="-12" width="30" height="15" fill="#dc2626" opacity="0.8"/>
      <text x="85" y="0" font-size="11" fill="#64748b">负值</text>
      <rect x="140" y="-12" width="30" height="15" fill="#f97316" opacity="0.8"/>
      <text x="175" y="0" font-size="11" fill="#64748b">较低</text>
      <rect x="230" y="-12" width="30" height="15" fill="#22c55e" opacity="0.8"/>
      <text x="265" y="0" font-size="11" fill="#64748b">中等</text>
      <rect x="320" y="-12" width="30" height="15" fill="#8b5cf6" opacity="0.8"/>
      <text x="355" y="0" font-size="11" fill="#64748b">较高</text>
      <rect x="410" y="-12" width="30" height="15" fill="#0f766e" opacity="0.8"/>
      <text x="445" y="0" font-size="11" fill="#64748b">最高</text>
    </g>
  </svg>
</div>
