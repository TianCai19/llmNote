---
// PPO clip 动态示意图（点在 r_t 轴上移动，展示被裁剪区域）
---

<div class="svg-container">
    <svg width="900" height="260" viewBox="0 0 900 260" xmlns="http://www.w3.org/2000/svg">
        <defs>
            <linearGradient id="ppoClipBandAnim" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#f97316;stop-opacity:0.18" />
                <stop offset="100%" style="stop-color:#f97316;stop-opacity:0.08" />
            </linearGradient>
        </defs>

        <text x="450" y="26" text-anchor="middle" font-size="16" font-weight="bold" fill="#1e293b">动态直觉：r_t 越界时收益被截断</text>

        <line x1="140" y1="190" x2="760" y2="190" stroke="#1f2937" stroke-width="2"/>
        <line x1="140" y1="190" x2="140" y2="80" stroke="#1f2937" stroke-width="2"/>
        <text x="770" y="194" font-size="12" fill="#334155">
            r<tspan baseline-shift="sub" font-size="9">t</tspan>
        </text>
        <text x="120" y="80" font-size="12" fill="#334155" text-anchor="end">L(θ)</text>

        <rect x="370" y="80" width="160" height="110" fill="url(#ppoClipBandAnim)" stroke="#f97316" stroke-width="1.5" rx="10"/>
        <text x="450" y="98" text-anchor="middle" font-size="11" fill="#f97316">clip 区间</text>

        <line x1="160" y1="170" x2="740" y2="100" stroke="#2563eb" stroke-width="2.5"/>
        <text x="680" y="96" font-size="11" fill="#2563eb">
            r<tspan baseline-shift="sub" font-size="8">t</tspan> · Â<tspan baseline-shift="sub" font-size="8">t</tspan>
        </text>

        <line x1="160" y1="170" x2="370" y2="150" stroke="#0f766e" stroke-width="2.5"/>
        <line x1="370" y1="150" x2="530" y2="150" stroke="#0f766e" stroke-width="2.5"/>
        <line x1="530" y1="150" x2="740" y2="100" stroke="#0f766e" stroke-width="2.5"/>

        <circle r="6" fill="#0f766e">
            <animate attributeName="cx" dur="6s" repeatCount="indefinite"
                values="200; 320; 440; 560; 680; 560; 440; 320; 200" />
            <animate attributeName="cy" dur="6s" repeatCount="indefinite"
                values="165; 155; 145; 145; 120; 145; 145; 155; 165" />
        </circle>

        <text x="450" y="230" text-anchor="middle" font-size="12" fill="#64748b">蓝线是原始目标，绿线是被 clip 后的目标</text>
    </svg>
</div>
