---
import BaseLayout from '../layouts/BaseLayout.astro';
import { todayYmd, yesterdayYmd } from '../utils/date';

const notes = [
    {
        number: '09',
        title: 'LoRA 低秩适配',
        description: '冻结大模型、训练低秩矩阵：高效微调的核心思路',
        href: '/notes/lora',
        tags: ['PEFT', 'LoRA', 'Finetune'],
        date: todayYmd(),
        readTime: '14 min'
    },
    {
        number: '08',
        title: 'PPO 算法',
        description: 'Clipped 目标、GAE 与 LLM 对齐实践要点',
        href: '/notes/ppo',
        tags: ['RL', 'PPO', 'Alignment'],
        date: todayYmd(),
        readTime: '20 min'
    },
    {
        number: '07',
        title: 'Manus 深度访谈',
        description: '通用 Agent 的技术突破、产品哲学与行业洞察',
        href: '/notes/manus-general-agent',
        tags: ['Agent', 'Manus', '访谈'],
        date: todayYmd(),
        readTime: '28 min'
    },
    {
        number: '00',
        title: 'YOLO 原理解析',
        description: '密集预测、正样本匹配、loss 与 NMS：把一阶段检测的链条串起来',
        href: '/notes/yolo',
        tags: ['CV', 'Detection', 'Quickstart'],
        date: todayYmd(),
        readTime: '8 min'
    },
    {
        number: '01',
        title: '马尔可夫决策过程 (MDP)',
        description: '强化学习的数学基础：智能体与环境的交互模型',
        href: '/notes/mdp',
        tags: ['RL', '基础', '数学'],
        date: yesterdayYmd(),
        readTime: '18 min'
    },
    {
        number: '02',
        title: 'Vision Transformer (ViT)',
        description: '深入理解 ViT 如何让 AI 看懂图片',
        href: '/notes/vit',
        tags: ['Vision', 'Transformer', 'VLM'],
        date: yesterdayYmd(),
        readTime: '15 min'
    },
    {
        number: '03',
        title: 'Transformer 架构',
        description: '现代 AI 的基石：注意力机制与序列建模',
        href: '/notes/transformer',
        tags: ['NLP', 'Attention', '基础'],
        date: yesterdayYmd(),
        readTime: '12 min'
    },
    {
        number: '04',
        title: 'Qwen3-VL（Part 1）',
        description: '架构与关键创新：Interleaved MRoPE、DeepStack、时间戳 token',
        href: '/notes/qwen-vl',
        tags: ['VLM', 'Qwen3', '架构'],
        date: yesterdayYmd(),
        readTime: '35 min'
    },
    {
        number: '05',
        title: 'Qwen3-VL（Part 2）',
        description: '四阶段预训练与数据配方全解析',
        href: '/notes/qwen3-vl-training',
        tags: ['Pretrain', 'Data', '多模态'],
        date: yesterdayYmd(),
        readTime: '40 min'
    },
    {
        number: '06',
        title: 'Qwen3-VL（Part 3）',
        description: '能力、评测与落地：从 prompt 到部署',
        href: '/notes/qwen3-vl-apps',
        tags: ['Inference', 'Deploy', '应用'],
        date: yesterdayYmd(),
        readTime: '30 min'
    }
];

const totalMinutes = notes.reduce((sum, note) => sum + Number.parseInt(note.readTime, 10), 0);
---

<BaseLayout title="首页" description="LLM 学习笔记 - 深入理解大语言模型与多模态 AI">
    <header class="mb-16 grid items-center gap-10 lg:grid-cols-[1.15fr,0.85fr] lg:gap-16">
        <div class="space-y-6">
            <p class="inline-flex items-center gap-3 text-xs uppercase tracking-[0.4em] text-[color:var(--muted)]">
                <span class="h-px w-10 bg-[color:var(--accent)]"></span>
                LLM Note Lab
            </p>
            <h1 class="font-display text-4xl leading-tight sm:text-5xl lg:text-6xl">
                让复杂的大模型知识变得可读、可实践
            </h1>
            <p class="text-base leading-relaxed text-[color:var(--muted)] sm:text-lg">
                从 Vision Transformer 到注意力机制，我们把架构拆解成可操作的知识卡片，配图、类比与工程视角并行。
            </p>
            <div class="flex flex-wrap gap-3">
                <span class="chip">架构拆解</span>
                <span class="chip">多模态</span>
                <span class="chip">工程视角</span>
            </div>
            <div class="flex flex-wrap gap-3 pt-2">
                <a
                    href="/notes/yolo"
                    class="inline-flex items-center justify-center rounded-full bg-[color:var(--accent)] px-6 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-[color:var(--accent-strong)] focus:outline-none focus:ring-2 focus:ring-[color:var(--ring)]"
                >
                    YOLO 原理解析
                </a>
                <a
                    href="#notes"
                    class="inline-flex items-center justify-center rounded-full border border-white/70 bg-white/70 px-6 py-3 text-sm font-semibold text-[color:var(--accent-strong)] transition hover:bg-white/90 focus:outline-none focus:ring-2 focus:ring-[color:var(--ring)]"
                >
                    浏览全部笔记
                </a>
            </div>
        </div>
        <div class="glass-panel rounded-3xl p-6 sm:p-8">
            <div class="text-xs uppercase tracking-[0.3em] text-[color:var(--muted)]">学习仪表</div>
            <div class="mt-6 grid gap-6">
                <div class="flex items-baseline justify-between">
                    <span class="text-sm text-[color:var(--muted)]">已发布笔记</span>
                    <span class="font-display text-3xl text-[color:var(--accent-strong)]">{notes.length}</span>
                </div>
                <div class="h-px bg-white/70"></div>
                <div class="flex items-baseline justify-between">
                    <span class="text-sm text-[color:var(--muted)]">总阅读时间</span>
                    <span class="font-display text-3xl text-[color:var(--accent-strong)]">{totalMinutes} min</span>
                </div>
            </div>
            <div class="mt-6 rounded-2xl border border-white/70 bg-white/70 px-4 py-3 text-sm text-[color:var(--muted)]">
                聚焦 Vision / Attention / 多模态
            </div>
        </div>
    </header>

    <section id="notes" class="space-y-6">
        <div class="flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between">
            <h2 class="font-display text-2xl sm:text-3xl">最新笔记</h2>
            <p class="text-sm text-[color:var(--muted)]">持续更新，聚焦关键概念与工程落地。</p>
        </div>
        <div class="grid gap-6">
            {notes.map((note, index) => (
                <a href={note.href} class="group block">
                    <article class="note-card reveal" style={`animation-delay: ${index * 120}ms`}>
                        <div class="relative z-10 flex flex-col gap-6 sm:flex-row sm:items-center">
                            <div class="flex flex-1 flex-col gap-4">
                                <div class="flex items-start gap-4">
                                    <span class="note-number">{note.number}</span>
                                    <div>
                                        <h3 class="font-display text-2xl text-[color:var(--ink)] transition-colors duration-300 group-hover:text-[color:var(--accent-strong)] sm:text-3xl">
                                            {note.title}
                                        </h3>
                                        <p class="mt-2 text-sm text-[color:var(--muted)] sm:text-base">
                                            {note.description}
                                        </p>
                                    </div>
                                </div>
                                <div class="flex flex-wrap items-center gap-2">
                                    {note.tags.map(tag => (
                                        <span class="chip">{tag}</span>
                                    ))}
                                    <span class="note-meta">
                                        <span class="h-1 w-1 rounded-full bg-[color:var(--accent)]"></span>
                                        {note.date}
                                    </span>
                                    <span class="note-meta">
                                        <span class="h-1 w-1 rounded-full bg-[color:var(--accent)]"></span>
                                        {note.readTime}
                                    </span>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 text-sm font-semibold text-[color:var(--accent)] sm:ml-auto">
                                阅读笔记
                                <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                                </svg>
                            </div>
                        </div>
                    </article>
                </a>
            ))}
        </div>
    </section>
</BaseLayout>
